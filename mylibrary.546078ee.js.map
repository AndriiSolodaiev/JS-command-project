{"mappings":"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","sources":["src/js/refs.js","src/js/functions/renderMoviesWatchedAndQueue.js","src/js/functions/createMarkupMovies.js","src/js/functions/card.js","src/js/functions/modal.js","src/js/functions/onModalLibraryBtnClick.js","src/js/functions/checkModalBtnName.js"],"sourcesContent":["export const refs = {\n\n\n  moviesCollection: document.querySelector('.js-films-list'),\n  searchError: document.querySelector('.js-search-error'),\n  openModal: document.querySelector(\"[data-modal-open]\"),\n  form: document.querySelector('.js-search-form'),\n  input: document.querySelector('.js-search-input'),\n  moviesCollectionLibrary: document.querySelector('.js-library-films__list'),\n  openWatchedBtnEl: document.querySelector('.button__watched'),\n  openQueueBtnEl: document.querySelector('.button__queue'),\n  libraryContainerEl: document.querySelector('.js-library-container'),\n  libraryMessageContainerEl: document.querySelector('.library-message'),\n\n  paginationEl: document.querySelector('.js-pagination'),\n  // ці строчки перенесла у функцію модалки, тому що елементи кнопок існують тільки при відкритій модалці, \n  // поза нею до них неможливо звернутись\n  // addToWatchBtnEl: document.querySelector('.mw-movie__btn-addwatch'),\n  // addToQueueBtnEl: document.querySelector('.mw-movie__btn-addqueue'),\n \n  \n\n  loaderContainer: document.querySelector('.loader-container')\n\n};\n\n//масиви з об'єктами фільмів my library, що будуть збережені до localStorage\nexport const library = {\n  watchedMovies: [],\n  queueMovies: [],\n};\n\nexport const data = {\n  page: 1,\n  totalPage: 1000,\n  searchString: '',\n  // typePagination буде приймати такі значення:\n  // search,\n  // trending,\n  // watched,\n  // queue,\n  // empty,\n  typePagination: 'trending',\n};","import { refs, data } from \"../refs\";\nimport { createMarkupMovies } from \"./createMarkupMovies\";\n\nexport function renderMoviesWatchedAndQueue(storageKey, typeOfLibrary) {\n    const moviesArr = JSON.parse(localStorage.getItem(storageKey));\n\n    if(moviesArr.length === 0) {\n        refs.libraryMessageContainerEl.innerHTML = `\n            <p class='library-message__text'>\n                There's nothing here yet...\n            </p>\n        `\n        refs.moviesCollectionLibrary.innerHTML = '';\n    } else {\n        refs.libraryMessageContainerEl.innerHTML = '';\n\n        const markup = createMarkupMovies(moviesArr);\n        refs.moviesCollectionLibrary.innerHTML = markup;\n\n        // page = moviesArr.slice(0, 20);\n        // на початку begin = 0, end = 20\n        // кожна наступна сторінка begin + 20, end + 20\n\n        // if(!moviesArr) {\n        //     data.page = null;\n        // } else {\n        //     data.page = page;\n        // }\n        \n        data.totalPage = Math.ceil(moviesArr.length / 20);\n        data.typePagination = typeOfLibrary;\n\n        // markupPagination(); \n    }\n}\n\n//storageKey - 'watchedMovies' or 'queueMovies'\n//libraryPage - 'watched' or 'queue'","import { createMoviesCardMarkup } from './card';\n\nexport function createMarkupMovies(arr) {\n    return arr.map(moviesCard => {\n        return `\n            <li class=\"movies__card film-colection__item\" data-id=${moviesCard.id}>\n                ${createMoviesCardMarkup(moviesCard)}\n            </li>`;\n      })\n      .join('');\n}","export function createMoviesCardMarkup(movies) {\n\n  const {\n    title,\n    original_title,\n    poster_path,\n    vote_average,\n    genre_ids,\n    release_date,\n  } = movies;\n        let posterPath = ``;\n        if (poster_path) {\n          posterPath = `https://image.tmdb.org/t/p/w400/${poster_path}`;\n        } else {\n          posterPath =\n            'https://studentlegallounge.humboldt.edu/sites/default/files/styles/panopoly_image_original/public/image-coming-soon.jpg?itok=e-RY5zkr';\n  }\n  \n  let voteAverage = vote_average;\n  if (voteAverage === 0.0) {\n    voteAverage = `+`\n  } else {\n    voteAverage = vote_average.toFixed(1)\n  }\n\n  let linea = '|'\n  if (genre_ids.length && release_date) {\n    linea = '|'\n  } else {\n    linea = ''\n  }\n\n        return `\n            <img\n                class='films-gallery__img'\n                src='${posterPath}'\n                alt='${original_title}'\n                loading='lazy'\n            />\n            \n            <div class='films-gallery__wrap'>\n                <h2 class='films-gallery__title'>${title}</h2>\n                <div class='films-gallery__info'>\n                <p class='films-gallery__text'>${setMovieGenresNames(genre_ids)} ${linea} ${release_date?.slice(0, 4,)}</p>\n                <p class='films-gallery__rate '>${voteAverage}</p>\n                </div>\n            </div>`;\n  \n   \n            \n};\n\nfunction setMovieGenresNames(array) {\n  const savedGenres = localStorage.getItem(\"genres\");\nconst parsedGenres = JSON.parse(savedGenres);\n  let genresCard = array.map(element => {\n   return parsedGenres[element]\n  })\n   if (genresCard.length > 2) {\n      genresCard.splice(2, genresCard.length - 1, 'Other');\n  }\n  if (!genresCard.length) {\n    \n    return genresCard = ''\n  }\n  \n  return genresCard.join(', ');  \n} \n","import { onModalLibraryBtnClick } from './onModalLibraryBtnClick';\nimport { refs, library } from './../refs';\nimport { checkModalBtnName } from './checkModalBtnName';\nimport { renderMoviesWatchedAndQueue } from './renderMoviesWatchedAndQueue';\n\nexport function openModal(event) {\n  event.preventDefault();\n    \n  ////слухач на Escape\n  document.addEventListener(\"keydown\", (event) => {\n    if (event.code === \"Escape\") {\n      modalMovieCard.hidden = true\n    };\n  }); \n  if(refs.openQueueBtnEl) {\n    document.addEventListener(\"keydown\", () => {\n      if(refs.openQueueBtnEl.classList.contains('btn__current')) {\n        renderMoviesWatchedAndQueue('queueMovies', 'queue');\n      } else {\n        renderMoviesWatchedAndQueue('watchedMovies', 'watched');\n      }\n    });\n  }\n\n  console.log(refs);\n    \n  ////перевірка чи таргет = li\n  const modalMovieCard = document.querySelector(\"[mw-movie-card]\");\n  modalMovieCard.hidden = false;\n  if (!event.target.closest(\"li\")) {\n    return\n    };\n    \n  ////витягаємо потрібний нам об'єкт з масиву об'єктів\n  let movieId = event.target.closest(\"li\").dataset.id\n//   console.log(movieId)\n  const movieStorageArr = JSON.parse(localStorage.getItem(\"currentMovies\"))\n//   console.log(movieStorageArr)\n  let movieCardObj = movieStorageArr.find(movie => movie.id === Number(movieId))\n  // console.log(movieCardObj);\n    \n  ////формуємо модалку з об'єкта фільма\n  modalMovieCard.innerHTML = `<div class=\"mw-movie container\">\n    <button class=\"mw-movie__btn-close\" type=\"button\" mw-movie-close>\n      <svg class=\"mw-movie__icon-close\">\n        <use\n          aria-label=\"close icon\"\n          href=\"./sass/img/sprite.svg#icon-cross\"\n        ></use>\n      </svg>\n    </button>\n    <div>\n      <img\n        class=\"mw-movie__image\"\n        src=\"https://www.themoviedb.org/t/p/w600_and_h900_bestv2/${movieCardObj.poster_path\n    }\"\n        alt=\"Movie\"\n        width=\"375\"\n        height=\"478\"\n      />\n    </div>\n    <div>\n      <h2 class=\"mw-movie__info-heading\">${movieCardObj.title}</h2>\n      <table class=\"mw-movie__info-table\">\n        <tr class=\"mw-movie__info-table-row\">\n          <td class=\"mw-movie__info-table-row-name\">Vote / Votes</td>\n          <td class=\"mw-movie__info-table-row-data\">\n            <span class=\"mw-movie__info-table-rating\">${movieCardObj.vote_average.toFixed(1)}</span\n            ><span class=\"mw-movie__info-table-slash\"> / </span>${movieCardObj.vote_count}\n          </td>\n        </tr>\n        <tr class=\"mw-movie__info-table-row\">\n          <td class=\"mw-movie__info-table-row-name\">Popularity</td>\n          <td class=\"mw-movie__info-table-row-data\">${movieCardObj.popularity.toFixed(1)}</td>\n        </tr>\n        <tr class=\"mw-movie__info-table-row\">\n          <td class=\"mw-movie__info-table-row-name\">Original Title</td>\n          <td class=\"mw-movie__info-table-row-data\">${movieCardObj.original_title}</td>\n        </tr>\n        <tr class=\"mw-movie__info-table-row\">\n          <td class=\"mw-movie__info-table-row-name\">Genres</td>\n          <td class=\"mw-movie__info-table-row-data\">${movieCardObj.genres}</td>\n        </tr>\n      </table>\n      <p class=\"mw-movie__info-table-description\">\n        ABOUT <br />\n        ${movieCardObj.overview}\n      </p>\n      <ul class=\"mw-movie__btn-list\">\n        <li>\n          <button class=\"mw-movie__btn-addwatch\" type=\"button\">Add to watched</button>\n        </li>\n        <li>\n          <button class=\"mw-movie__btn-addqueue\" type=\"button\">Add to queue</button>\n        </li>\n      </ul>\n    </div>\n  </div>`;\n    \n  ////слухач на кнопку закриття\n  const closeMovieCard = document.querySelector(\"[mw-movie-close]\")\n  closeMovieCard.addEventListener(\"click\", () =>\n  {modalMovieCard.hidden = true})\n\n  //оновлення вмісту сторінку по закриттю модалки\n  if(refs.openQueueBtnEl) {\n    closeMovieCard.addEventListener(\"click\", () => {\n      if(refs.openQueueBtnEl.classList.contains('btn__current')) {\n        renderMoviesWatchedAndQueue('queueMovies', 'queue');\n      } else {\n        renderMoviesWatchedAndQueue('watchedMovies', 'watched');\n      }\n    });\n  }\n\n\n  const modalRefs = {\n      addToWatchedBtnEl: document.querySelector('.mw-movie__btn-addwatch'),\n      addToQueueBtnEl: document.querySelector('.mw-movie__btn-addqueue'),\n  };\n\n  if(JSON.parse(localStorage.getItem('watchedMovies'))) {\n    library.watchedMovies = JSON.parse(localStorage.getItem('watchedMovies'));\n  }\n  \n  if(JSON.parse(localStorage.getItem('queueMovies'))) {\n    library.queueMovies = JSON.parse(localStorage.getItem('queueMovies'));\n  }\n\n  checkModalBtnName(\n    movieCardObj,\n    modalRefs.addToWatchedBtnEl, \n    'watched',\n    'watchedMovies'\n  );\n\n  checkModalBtnName(\n    movieCardObj,  \n    modalRefs.addToQueueBtnEl, \n    'queue', \n    'queueMovies'\n  );\n\n  // слухачі подій на кнопки add to watched, add to queue\n  modalRefs.addToWatchedBtnEl.addEventListener('click', () => onModalLibraryBtnClick(\n    movieCardObj, \n    library.watchedMovies, \n    modalRefs.addToWatchedBtnEl, \n    'watched', \n    'watchedMovies'));\n\n  modalRefs.addToQueueBtnEl.addEventListener('click', () => onModalLibraryBtnClick(\n    movieCardObj, \n    library.queueMovies, \n    modalRefs.addToQueueBtnEl, \n    'queue', \n    'queueMovies'));\n}\n/////////////\n// Доробити:\n// 0. Додати жанри\n// 1. зняти слухач подій з escape\n// 2. закриття модалки по кліку поза модалкою\n// 3. куди ділась svg\n// 4. фіналізувати стилі\n// 5. може якась затримка для завантаженя фото","//додає та видаляє картку з фільмом до watched/queue, змінює,\n//відповідно цьому змінює текст кнопки\n//currentMovie - об'єкт фільма з модалки\n//libraryArr - масив фільмів watched/queue\n//btnEl - поточна кнопка\n//action - вказати watched або queue (відповідно до кнопки, на яку натиснули)\n//storageKey - ключ елемента localStorage (watchedMovies або queueMovies)\nexport function onModalLibraryBtnClick(currentMovie, libraryArr, btnEl, action, storageKey) { \n    if(btnEl.textContent === `Add to ${action}`) {\n        libraryArr.push(currentMovie);\n        btnEl.textContent = `Remove from ${action}`;\n    } else {\n        for(let i = 0; i <= libraryArr.length; i += 1) {\n            if(libraryArr[i].id === currentMovie.id) {\n                libraryArr.splice(i, 1);\n                break;\n            }\n        }\n        btnEl.textContent = `Add to ${action}`;\n    }\n\n    localStorage.setItem(storageKey, JSON.stringify(libraryArr));\n}","//додається при відкритті модалки, перевіряє чи є фільм у watched/queue,\n//відповідно цьому змінює текст кнопки\n\nexport function checkModalBtnName(currentMovie, btnEl, action, storageKey) {\n    const storageArr = JSON.parse(localStorage.getItem(storageKey));\n    \n    if(storageArr) {\n        if(storageArr.find(libraryMovie => currentMovie.id === libraryMovie.id)) {\n            btnEl.textContent = `Remove from ${action}`;\n        } else {\n            btnEl.textContent = `Add to ${action}`;\n        }\n    }\n}"],"names":["$ee27a4d7c64fc8c4$export$21666b427502ea6d","moviesCollection","document","querySelector","searchError","openModal","form","input","moviesCollectionLibrary","openWatchedBtnEl","openQueueBtnEl","libraryContainerEl","libraryMessageContainerEl","paginationEl","loaderContainer","$ee27a4d7c64fc8c4$export$b839f963c7dc0e34","watchedMovies","queueMovies","$ee27a4d7c64fc8c4$export$4051a07651545597","page","totalPage","searchString","typePagination","$krGWQ","parcelRequire","$fddd419781e97e5b$export$b2647fffe394fc1e","storageKey","typeOfLibrary","moviesArr","JSON","parse","localStorage","getItem","length","refs","innerHTML","markup","$6GPCA","createMarkupMovies","data","Math","ceil","$iqXNn","$4deeb53f857fb5de$export$b3c38e087ca51ee0","arr","map","moviesCard","id","createMoviesCardMarkup","join","$d6b909cf38ca7752$export$c8cfae728cd06ed9","movies","title","original_title","poster_path","vote_average","genre_ids","release_date","posterPath","voteAverage","toFixed","linea","array","savedGenres","parsedGenres","genresCard","element","splice","$d6b909cf38ca7752$var$setMovieGenresNames","slice","$4OCtC","$a480ba719ca97862$export$a7f6cffb6b8ba11c","event1","preventDefault","addEventListener","event","code","modalMovieCard","hidden","classList","contains","$lNjrx","renderMoviesWatchedAndQueue","console","log","target","closest","movieId","dataset","movieCardObj","find","movie","Number","vote_count","popularity","genres","overview","closeMovieCard","modalRefs","addToWatchedBtnEl","addToQueueBtnEl","library","$4M6zP","checkModalBtnName","onModalLibraryBtnClick","$3819ad9bef7bb256$export$c308ef7bf7da4033","currentMovie","libraryArr","btnEl","action","textContent","push","i","setItem","stringify","$37a0bf288a4a2229$export$1a079980bd7404e4","storageArr","libraryMovie"],"version":3,"file":"mylibrary.546078ee.js.map"}